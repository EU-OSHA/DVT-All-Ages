define(function(require){var configuration=require("json!horizontal/config/configuration"),environment=require("json!horizontal/config/environment"),pentahoInstance=configuration.paths["pentaho-instance"],dataPath=pentahoInstance+configuration.paths.data["pentaho-path"],verticalPath=(configuration.paths.images,pentahoInstance+configuration.paths.partials+"/modules/vertical/"),horizontalPath=pentahoInstance+configuration.paths["directive-route"]+"/modules/horizontal/",horizontalPathDiretive=horizontalPath+"directives/";HTMLElement.prototype.click=function(){var evt=this.ownerDocument.createEvent("MouseEvents");evt.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null),this.dispatchEvent(evt)};var _getPiwikInstance=function(){if(!1===environment.do_track)return[];var url=configuration.paths.piwik[environment.piwik].protocol+":"+configuration.paths.piwik[environment.piwik].domain+":"+configuration.paths.piwik[environment.piwik].port+configuration.paths.piwik[environment.piwik].path,basePath=configuration.paths.enviroment[environment.pentaho].domain+":"+configuration.paths.enviroment[environment.pentaho].port+"/#!";"undefined"==typeof _paq&&(window._paq=[]),window._paq.push(["enableLinkTracking"]),window._paq.push(["setTrackerUrl",url+"piwik.php"]),window.piwikBasePath=basePath,window._paq.push(["setSiteId",configuration.paths.piwik[environment.piwik].SiteId]);var d=document,g=d.createElement("script"),s=d.getElementsByTagName("head")[0];return g.type="text/javascript",g.async=!0,g.defer=!0,g.src=url+"piwik.js",s.appendChild(g),window._paq};return{isDebugMode:function(){return configuration.debugMode},isPacked:function(){return environment.packed},getImagesPath:function(){return pentahoInstance+configuration.paths.images},getVerticalPath:function(){return verticalPath},getVerticalTplPath:function(module,tplName){return verticalPath+module+"/"+tplName+(environment.packed?".min":"")+".html"},getVerticalStylePath:function(module,tplName){return verticalPath+module+"/"+tplName+".css"},getVerticalDirectiveTplPath:function(module,directiveName){return verticalPath+module+"/"+directiveName+(environment.packed?".min":"")+".html"},getVerticalDirectiveStylePath:function(module,directiveName){return verticalPath+module+"/"+directiveName+".css"},getVerticalDirectiveDataPath:function(module,directiveName){return verticalPath+module+"/"+directiveName+(environment.packed?".min":"")+".json"},getHorizontalPath:function(){return horizontalPath},getHorizontalDirectiveTplPath:function(module,tplName){return horizontalPathDiretive+module+"/"+tplName+(environment.packed?".min":"")+".html"},getHorizontalDirectiveStylePath:function(directive,styleName){return horizontalPathDiretive+directive+"/"+styleName+".css"},getHorizontalDirectiveDataPath:function(directive,jsonName){return horizontalPathDiretive+directive+"/"+jsonName+(environment.packed?".min":"")+".json"},getModalTplPath:function(action){var tpl;switch(action){case"retirementAge":tpl=verticalPath+"issue/partials/historical/retirementAge.html";break;case"olderWorkers":tpl=verticalPath+"issue/partials/historical/olderWorkers.html";break;case"HLYvsLE":tpl=verticalPath+"issue/partials/historical/HLYvsLE.html";break;case"maximize":case"maximizeRadar":case"maximizePyramid":tpl=horizontalPathDiretive+"graphic/maximize/"+action+".html";break;default:tpl=null}return console.log("Graphic context menu action template: "+tpl),tpl},getDataPilotPath:function(){return dataPath+configuration.paths.data.cda.datapilot},getPilotDataPath:function(){return dataPath+configuration.paths.data.cda.datapilot},getPolicyDataPath:function(){return dataPath+configuration.paths.data.cda.policies},getAPDataPath:function(){return dataPath+configuration.paths.data.cda.approach},getCountriesDataPath:function(){return dataPath+configuration.paths.data.cda.countryCard},getIssueDataPath:function(){return dataPath+configuration.paths.data.cda.issue},getIssueHistoricalDataPath:function(){return dataPath+configuration.paths.data.cda.issueHistorical},getGlossaryDataPath:function(){return dataPath+configuration.paths.data.cda.glossary},getPiwikPath:function(){return configuration.paths.piwik[environment.piwik].protocol+":"+configuration.paths.piwik[environment.piwik].domain+":"+configuration.paths.piwik[environment.piwik].port+configuration.paths.piwik[environment.piwik].path+"piwik.js"},getPiwikInstance:_getPiwikInstance,tooglePiwik:function(val){window._paq=1==val?[]:_getPiwikInstance},dynamicallyRegisterController:function($controllerProvider,path,module,controllerName){return{myCtrl:["$q",function($q){var defer=$q.defer();return require([path],function(ctrl){$controllerProvider.register(controllerName,ctrl),defer.resolve()}),defer.promise}]}},isIE:function(){return!("Microsoft Internet Explorer"!=navigator.appName&&!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/rv 11/))},isMobile:function(){return!!(navigator.userAgent.match("iPhone")||navigator.userAgent.match("iPad")||navigator.userAgent.match("iPod")||navigator.userAgent.match("Android")||navigator.userAgent.match("IEMobile")||navigator.userAgent.match("Opera Mini"))}}});