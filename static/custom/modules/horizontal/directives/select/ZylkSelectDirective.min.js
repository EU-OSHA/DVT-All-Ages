define(function(require){"use strict";function nextId(){return sequence++}function ZylkSelectDirective($log){return{restrict:"E",priority:1,transclude:!0,require:["ngModel","^zylkDashboard"],scope:{params:"=",listenTo:"="},template:'<div class="dropdown"><div class="input-group"> <span class="input-group-addon glyphicon glyphicon-stop" aria-hidden="false"></span> <span ng-attr-id="{{id}}" /></div></div>',link:function(scope,element,attributes,controllers){var ngModel=controllers[0],dashboard=controllers[1];scope.id="zylk_select_"+nextId();var definition={name:scope.id,type:"selectComponent",priority:attributes.priority||1,parameter:attributes.parameter,listeners:[],valueAsId:!1,externalPlugin:"select2",htmlObject:scope.id,executeAtStart:!0,queryDefinition:{dataAccessId:attributes.query,path:attributes.cda},postChange:function(selected){this.dashboard.fireChange(attributes.parameter,selected),ngModel.$setViewValue(selected,"change")},postExecution:function(){var divs=document.querySelectorAll("div.select2-container");[].forEach.call(divs,function(div){div.classList.add("btn","btn-default","dropdown-toggle","col-xs-12")})},postFetch:function(data){attributes.invalidateDefaultSelection&&(data.resultset.unshift(["-1","Select a country to compare"]),data.queryInfo.totalRows++)}};if(scope.params&&(definition.parameters=scope.params),scope.listenTo)for(var listen in scope.listenTo)definition.listeners[listen]=scope.listenTo[listen];$log.debug("new SelectDirective | id: "+scope.id),dashboard.register(new SelectComponent(definition))}}}var SelectComponent=require("cdf/components/SelectComponent"),sequence=(require("horizontal/config/configService"),1);return ZylkSelectDirective.$inject=["$log"],ZylkSelectDirective});