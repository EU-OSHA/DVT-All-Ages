define(function(require){"use strict";function controller($scope,$stateParams,$state,$log,configService,dataService,mapProvider,dvtUtils,approachService,$document,$window,$cookies){var i18n=require("json!vertical/approaches/i18n");switch($scope.i18n=i18n,$scope.dashboard={},$scope.dashboard.parameters={approach:$stateParams.pGroup.replace("group",""),pEurope:"EU",color1:dvtUtils.getGroupColor("1"),color2:dvtUtils.getGroupColor("2"),color3:dvtUtils.getGroupColor("3"),color4:dvtUtils.getGroupColor("4")},$scope.dashboard.promises={promiseShape:mapProvider.getEuropeShape(),tab2MainPolicies:dataService.getAPTab2MainPolicies(parseInt($stateParams.pGroup.replace("group",""))),tab1GroupDescription:dataService.getAPTab1GroupDesc(parseInt($stateParams.pGroup.replace("group",""))),countryGroups:dataService.getGroupCountryList()},$scope.dashboard.cda=dvtUtils.setCDAIn("CA"),$scope.dashboard.promises.countryGroups.then(function(result){$scope=dataService.createGroupCountryList($scope,result.data)}),$scope.map={clickAction:mapProvider.getCommonClickAction},dvtUtils.fixGroupColor($stateParams.pGroup.replace("group",""),$scope),$scope.fixColorMap=function(){dvtUtils.fixGroupColor($stateParams.pGroup.replace("group",""),$scope);var component=this,dashboard=component.dashboard,color=dashboard.getParameterValue("pGroupColor"),colorEU=dashboard.getParameterValue("pEUColor"),europe=dashboard.getParameterValue("pEurope");component.chartDefinition.colors=[color],component.chartDefinition.colorMap[europe]=colorEU},$scope.refreshHash=function(){$state.go("approaches-indicators",{pGroup:"group"+$scope.dashboard.parameters.approach})},approachService.getTab2MainPoliciesData($scope),approachService.getTab1GroupDescriptionData($scope),$scope.indicators=approachService.getIndicatorList($scope,$state),$scope.indicatorIndex=$stateParams.indicator,$scope.enlarge={labelVisible:function(d){$log.debug("@@@@@@@@MAX,MIN,EU,FIRST&LASTYEARS@@@@@@@@"),$log.debug(d);var current=d.datum.atoms.value.value,country=d.datum.atoms.series.value,year=d.datum.atoms.category.value,all=d.datum.owner._datums,next=void 0,nextCountry=void 0,nextYear=void 0,isMax=!0,isMin=!0,isLast=!0,isFirst=!0;return all.forEach(function(a,b,c){nextCountry=a.atoms.series.value,nextYear=a.atoms.category.value,next=a.atoms.value.rawValue,nextYear<year&&(isFirst=!1),nextYear>year&&(isLast=!1),current>next&&"EU"!=nextCountry&&year==nextYear&&(isMin=!1),current<next&&"EU"!=nextCountry&&year==nextYear&&(isMax=!1)}),("EU"===country||isMax||isMin)&&(isLast||isFirst)},labelTextAlign:function(d){return 0==d.dataIndex?"right":"left"}},$scope.fixEnlargeColorMap1=function(){var dashboard=this.dashboard,color=dashboard.getParameterValue("color1"),colorEU=dashboard.getParameterValue("pEUColor"),europe=dashboard.getParameterValue("pEurope"),component=this;component.chartDefinition.colors=[color],component.chartDefinition.colorMap[europe]=colorEU},$scope.fixEnlargeColorMap2=function(){var dashboard=this.dashboard,color=dashboard.getParameterValue("color2"),colorEU=dashboard.getParameterValue("pEUColor"),europe=dashboard.getParameterValue("pEurope"),component=this;component.chartDefinition.colors=[color],component.chartDefinition.colorMap[europe]=colorEU},$scope.fixEnlargeColorMap3=function(){var dashboard=this.dashboard,color=dashboard.getParameterValue("color3"),colorEU=dashboard.getParameterValue("pEUColor"),europe=dashboard.getParameterValue("pEurope"),component=this;component.chartDefinition.colors=[color],component.chartDefinition.colorMap[europe]=colorEU},$scope.fixEnlargeColorMap4=function(){var dashboard=this.dashboard,color=dashboard.getParameterValue("color4"),colorEU=dashboard.getParameterValue("pEUColor"),europe=dashboard.getParameterValue("pEurope"),component=this;component.chartDefinition.colors=[color],component.chartDefinition.colorMap[europe]=colorEU},$state.current.name){case"approaches-enlarge":$scope.enlargeTabActive="active",$scope.enlargeActive="active in",$scope.indicatorsTabActive="",$scope.indicatorsActive="",$scope.referralTabActive="",$scope.referralActive="";break;case"approaches-referral-iniciatives":$scope.enlargeTabActive="",$scope.enlargeActive="",$scope.indicatorsTabActive="",$scope.indicatorsActive="",$scope.referralTabActive="active",$scope.referralActive="active in";break;case"approaches-indicators":$scope.enlargeTabActive="",$scope.enlargeActive="",$scope.indicatorsTabActive="active",$scope.indicatorsActive="active in",$scope.referralTabActive="",$scope.referralActive=""}$scope.gotoTab2=function(){var altura=0;angular.element("#containerMenu").addClass("overflowed");var altura=angular.element("#containerMenu").height()+angular.element("#indicators-content").height();angular.element("#containerMenu").removeClass("overflowed"),setTimeout(function(){var section=angular.element("#approaches-map-tabs");$document.scrollToElementAnimated(section,altura,500)},300)},$scope.$on("loaded",function(event,data){if("approaches-enlarge"==$state.current.name)$document.scrollTo(0,0,500),angular.element("#containerMenu").addClass("overflowed"),setTimeout(function(){var altura=angular.element("#containerMenu").height()+angular.element("h1.page-header").height()+angular.element(".intro-text").height()+angular.element("#indicators-content").height()+angular.element(".back").height()+2;angular.element("#containerMenu").removeClass("overflowed");var top=angular.element("#enlarge").offset().top-altura;$document.scrollTo(0,top,500)},3e3);else if("approaches-referral-iniciatives"==$state.current.name)$document.scrollTo(0,0,500),angular.element("#containerMenu").addClass("overflowed"),setTimeout(function(){var altura=angular.element("#containerMenu").height()+angular.element("h1.page-header").height()+angular.element(".intro-text").height()+angular.element("#indicators-content").height()+20;angular.element("#containerMenu").removeClass("overflowed");var top=angular.element("#approaches-map-tabs").offset().top-altura;$document.scrollTo(0,top,500)},3e3);else{var positionScroll=$cookies.get("scrollTop");void 0!=positionScroll&&"undefined"!=positionScroll&&setTimeout(function(){$document.scrollTo(0,positionScroll,500),$cookies.remove("scrollTop"),$cookies.put("scrollTop",0)},3e3)}}),"approaches-enlarge"==$state.current.name?$scope.notifiable=!0:($state.current.name,$scope.notifiable=!1)}return controller.$inject=["$scope","$stateParams","$state","$log","configService","dataService","mapProvider","dvtUtils","approachService","$document","$window","$cookies"],controller});